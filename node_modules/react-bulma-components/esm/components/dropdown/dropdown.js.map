{"version":3,"sources":["../../../src/components/dropdown/dropdown.js"],"names":["React","useEffect","useRef","useState","PropTypes","classnames","DropdownItem","DropdownDivider","Button","Element","Dropdown","className","children","value","color","align","right","up","hoverable","label","onChange","closeOnSelect","icon","domRef","disabled","props","ref","isOpen","setIsOpen","close","evt","current","contains","target","onSelect","selectedValue","window","addEventListener","removeEventListener","childrenArray","Children","map","child","i","type","cloneElement","active","onClick","open","Item","Divider","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport DropdownItem from './components/item';\nimport DropdownDivider from './components/divider';\nimport Button from '../button';\n\nimport Element from '../element';\n\nconst Dropdown = ({\n  className,\n  children,\n  value,\n  color,\n  align,\n  right,\n  up,\n  hoverable,\n  label,\n  onChange,\n  closeOnSelect,\n  icon,\n  domRef,\n  disabled,\n  ...props\n}) => {\n  const ref = useRef(domRef);\n  const [isOpen, setIsOpen] = useState(false);\n  const close = (evt) => {\n    // IDK yet how to test using the ref in enzime\n    // istanbul ignore if\n    if (\n      hoverable ||\n      (evt && ref && ref.current && ref.current.contains(evt.target))\n    ) {\n      return;\n    }\n    if (ref.current) {\n      setIsOpen(false);\n    }\n  };\n\n  const onSelect = (selectedValue) => {\n    return () => {\n      if (onChange) {\n        onChange(selectedValue);\n      }\n      if (closeOnSelect) {\n        close();\n      }\n    };\n  };\n\n  useEffect(() => {\n    window.addEventListener('click', close);\n    return () => {\n      window.removeEventListener('click', close);\n    };\n  }, []);\n\n  let current = label;\n\n  const childrenArray = React.Children.map(children, (child, i) => {\n    if (\n      child.type === DropdownItem &&\n      ((i === 0 && !label) || child.props.value === value)\n    ) {\n      current = child.props.children;\n    }\n    return React.cloneElement(\n      child,\n      child.type === DropdownItem\n        ? {\n            active: child.props.value === value,\n            onClick: onSelect(child.props.value),\n          }\n        : {},\n    );\n  });\n\n  return (\n    <Element\n      {...props}\n      domRef={ref}\n      className={classnames('dropdown', className, {\n        'is-active': isOpen,\n        'is-up': up,\n        'is-right': right || align === 'right',\n        'is-hoverable': hoverable,\n      })}\n    >\n      <div\n        className=\"dropdown-trigger\"\n        role=\"presentation\"\n        onClick={() => {\n          if (disabled) {\n            return;\n          }\n          setIsOpen((open) => {\n            return !open;\n          });\n        }}\n      >\n        <Button disabled={disabled} color={color}>\n          <span>{current}</span>\n          {icon}\n        </Button>\n      </div>\n      <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n        <div className=\"dropdown-content\">{childrenArray}</div>\n      </div>\n    </Element>\n  );\n};\n\nDropdown.Item = DropdownItem;\n\nDropdown.Divider = DropdownDivider;\n\nDropdown.propTypes = {\n  /**\n   * The value of the currently selected dropdown item. If this value match\n   * with the value passed to a Dropdown.item it will be used as label if the label prop its empty\n   */\n  value: PropTypes.any,\n  /**\n   * Called when a dropdown item is selected.\n   */\n  onChange: PropTypes.func,\n  /**\n   * The color of the dropdown button.\n   */\n  color: PropTypes.oneOfType([\n    PropTypes.oneOf([\n      'primary',\n      'link',\n      'info',\n      'success',\n      'warning',\n      'danger',\n      'dark',\n      'text',\n    ]),\n    PropTypes.string,\n  ]),\n  disabled: PropTypes.bool,\n  /**\n   * Whether the dropdown should align to the right side.\n   */\n  right: PropTypes.bool,\n  /**\n   * Whether the dropdown menu should appear above the dropdown button\n   * instead of below.\n   */\n  up: PropTypes.bool,\n  /**\n   * Whether the dropdown menu can be activated when the cursor\n   * hovers above the button without clicking.\n   */\n  hoverable: PropTypes.bool,\n  /**\n   * A string, or a react component that displays the label of the dropdown\n   * button. if not set it will be use the selected Dropdown.Item or the first one\n   * if there is no selected\n   */\n  label: PropTypes.node,\n  /**\n   * Whether the dropdown menu should be closed when a dropdown item is selected.\n   */\n  closeOnSelect: PropTypes.bool,\n  /**\n   * A react component that draws the icon of the dropdown button.\n   * Usually it is an arrow (or a chevron) pointing downwards (or upwards).\n   */\n  icon: PropTypes.node,\n  /**\n   * Additional CSS classes to pass to `<Dropdown />`.\n   * They will sit alongside pre-applied bulma classes.\n   */\n};\n\nDropdown.defaultProps = {\n  closeOnSelect: true,\n};\n\nexport default Dropdown;\n"],"file":"dropdown.js"}